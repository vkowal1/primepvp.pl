<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Nightcity - Podanie na Organizacje</title>
    <link rel="shortcut icon" href="logo.png" type="image/png">
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <header>
        <nav>
            <div class="container">
                <div class="logo">
                    <img src="logo.png" alt="Logo Nightcity">
                    <h1>Nightcity</h1>
                </div>
                <div class="menu-toggle"><i class="fas fa-bars"></i></div>
                <ul>
                    <li><a href="index.html">Strona główna</a></li>
                    <li><a href="regulamin.html">Regulamin</a></li>
                    <li><a href="discord.html">Discord</a></li>
                    <li><a href="podanie.html">Podania</a></li>
                </ul>
            </div>
        </nav>
        <div class="hero">
            <h2>Podanie na Organizacje</h2>
        </div>
    </header>
    <main>
        <section>
            <div class="container">
                <h3>Formularz podania</h3>
                <form id="application-form" method="POST" action="">
                    <div class="form-group">
                        <label for="orgname">Nazwa organizacji:</label>
                        <input type="text" id="orgname" name="orgname" required>
                    </div>
                    <div class="form-group">
                        <label for="numberosob">Ilość członków</label>
                        <input type="number" id="numberosob" name="numberosob" required>
                    </div>
                    <div class="form-group">
                        <label for="nicki">Nicki na dc osób z zarządu wraz z #</label>
                        <textarea id="nicki" name="nicki" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="historiaorg">Historia organizacji (min 40 słów)</label>
                        <textarea id="historiaorg" name="historiaorg" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="charakterystyczne">Charakterystyczne cechy organizacji</label>
                        <textarea id="charakterystyczne" name="charakterystyczne" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="cowznienie">Co organizacja wniesie do RP na serwerze?</label>
                        <textarea id="cowznienie" name="cowznienie" required></textarea>
                    </div>
                    <div class="form-group">
                        <input type="submit" value="Wyślij podanie" class="btn">
                    </div>
                </form>
                <script>
                    const form = document.getElementById("application-form");
                    form.addEventListener("submit", (event) => {
                      event.preventDefault();
                      const formData = new FormData(event.target);
                      const webhookUrl = "https://discord.com/api/webhooks/1156959590362136700/cpSZVLNqETgq-D5XhHES5gliT5YCfv5lxrcfTPdTMznTztSKeYZ6zxu6ljJyZOJeYlgu";
                      const payload = {
                        content: "Nowe podanie na Organizacje!",
                        embeds: [
                          {
                            title: "Nowe podanie na Organizacje!",
                            fields: [
                              { name: "Nazwa Organizacji", value: formData.get("orgname"), inline: true },
                              { name: "Ilość członków", value: formData.get("numberosob"), inline: true },
                              { name: "Nicki na dc osób z zarządu wraz z #", value: formData.get("nicki"), inline: true },
                              { name: "Historia organizacji (min 40 słów)", value: formData.get("historiaorg"), inline: true },
                              { name: "Charakterystyczne cechy organizacji", value: formData.get("charakterystyczne") },
                              { name: "Co organizacja wniesie do RP na serwerze?", value: formData.get("cowznienie") },
                            ],
                          },
                        ],
                      };
                      fetch(webhookUrl, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify(payload),
                      })
                        .then(() => {
                          alert("Podanie zostało wysłane!");
                          form.reset();
                        })
                        .catch(() => {
                          alert("Wystąpił błąd podczas wysyłania podania. Spróbuj ponownie później.");
                        });
                    });
                  </script>                  
            </div>
        </section>
    </main>
    <footer>
        <div class="container">
            <p>&copy; 2023 EternalRP. Wszelkie prawa zastrzeżone.</p>
            <p>Created by SKYT#0001</p>
            <ul>
                <li><a href="index.html">Strona główna</a></li>
                <li><a href="regulamin.html">Regulamin</a></li>
                <li><a href="discord.html">Discord</a></li>
                <li><a href="podanie.html">Podania</a></li>
            </ul>
        </div>
    </footer>
    <script src="https://kit.fontawesome.com/8f4b4c2d36.js" crossorigin="anonymous"></script>
    <script src="app.js"></script>
</body>
</html>   